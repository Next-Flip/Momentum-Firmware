App(
    appid="js_app",
    name="JS Runner",
    apptype=FlipperAppType.SYSTEM,
    entry_point="js_app",
    # cdefines=["JS_RUNNER_FAP"],
    # Sources separation breaks linking when internal, comment as needed
    # sources=[
    #     "*.c*",
    #     "!modules",
    #     "modules/js_flipper.c",
    # ],
    stack_size=2 * 1024,
    resources="examples",
    order=0,
    fap_icon="icon.png",
    fap_category="assets",
)

App(
    appid="js_cli",
    targets=["f7"],
    apptype=FlipperAppType.PLUGIN,
    entry_point="js_cli_plugin_ep",
    requires=["cli"],
    sources=[
        "*.c*",
        "!modules",
        "modules/js_flipper.c",
    ],
)

App(
    appid="js_app_start",
    apptype=FlipperAppType.STARTUP,
    entry_point="js_app_on_system_start",
    # sources=["js_start.c"],
    order=160,
)

App(
    appid="js_event_loop",
    apptype=FlipperAppType.PLUGIN,
    entry_point="js_event_loop_ep",
    requires=["js_app"],
    sources=[
        "modules/js_event_loop/js_event_loop.c",
        "modules/js_event_loop/js_event_loop_api_table.cpp",
    ],
)

App(
    appid="js_gui",
    apptype=FlipperAppType.PLUGIN,
    entry_point="js_gui_ep",
    requires=["js_app"],
    sources=["modules/js_gui/js_gui.c", "modules/js_gui/js_gui_api_table.cpp"],
)

App(
    appid="js_gui__loading",
    apptype=FlipperAppType.PLUGIN,
    entry_point="js_view_loading_ep",
    requires=["js_app"],
    sources=["modules/js_gui/loading.c"],
)

App(
    appid="js_gui__empty_screen",
    apptype=FlipperAppType.PLUGIN,
    entry_point="js_view_empty_screen_ep",
    requires=["js_app"],
    sources=["modules/js_gui/empty_screen.c"],
)

App(
    appid="js_gui__submenu",
    apptype=FlipperAppType.PLUGIN,
    entry_point="js_view_submenu_ep",
    requires=["js_app"],
    sources=["modules/js_gui/submenu.c"],
)

App(
    appid="js_gui__text_input",
    apptype=FlipperAppType.PLUGIN,
    entry_point="js_view_text_input_ep",
    requires=["js_app"],
    sources=["modules/js_gui/text_input.c"],
)

App(
    appid="js_gui__byte_input",
    apptype=FlipperAppType.PLUGIN,
    entry_point="js_view_byte_input_ep",
    requires=["js_app"],
    sources=["modules/js_gui/byte_input.c"],
)

App(
    appid="js_gui__text_box",
    apptype=FlipperAppType.PLUGIN,
    entry_point="js_view_text_box_ep",
    requires=["js_app"],
    sources=["modules/js_gui/text_box.c"],
)

App(
    appid="js_gui__dialog",
    apptype=FlipperAppType.PLUGIN,
    entry_point="js_view_dialog_ep",
    requires=["js_app"],
    sources=["modules/js_gui/dialog.c"],
)

App(
    appid="js_gui__file_picker",
    apptype=FlipperAppType.PLUGIN,
    entry_point="js_gui_file_picker_ep",
    requires=["js_app"],
    sources=["modules/js_gui/file_picker.c"],
)

App(
    appid="js_notification",
    apptype=FlipperAppType.PLUGIN,
    entry_point="js_notification_ep",
    requires=["js_app"],
    sources=["modules/js_notification.c"],
)

App(
    appid="js_badusb",
    apptype=FlipperAppType.PLUGIN,
    entry_point="js_badusb_ep",
    requires=["js_app"],
    sources=["modules/js_badusb.c"],
)

App(
    appid="js_serial",
    apptype=FlipperAppType.PLUGIN,
    entry_point="js_serial_ep",
    requires=["js_app"],
    sources=["modules/js_serial.c"],
)

App(
    appid="js_gpio",
    apptype=FlipperAppType.PLUGIN,
    entry_point="js_gpio_ep",
    requires=["js_app"],
    sources=["modules/js_gpio.c"],
)

App(
    appid="js_math",
    apptype=FlipperAppType.PLUGIN,
    entry_point="js_math_ep",
    requires=["js_app"],
    sources=["modules/js_math.c"],
)

App(
    appid="js_storage",
    apptype=FlipperAppType.PLUGIN,
    entry_point="js_storage_ep",
    requires=["js_app"],
    sources=["modules/js_storage.c"],
)

App(
    appid="js_widget",
    apptype=FlipperAppType.PLUGIN,
    entry_point="js_widget_ep",
    requires=["js_app"],
    sources=["modules/js_widget.c"],
)

App(
    appid="js_vgm",
    apptype=FlipperAppType.PLUGIN,
    entry_point="js_vgm_ep",
    requires=["js_app"],
    sources=["modules/js_vgm/*.c", "modules/js_vgm/ICM42688P/*.c"],
)

App(
    appid="js_subghz",
    apptype=FlipperAppType.PLUGIN,
    entry_point="js_subghz_ep",
    requires=["js_app"],
    sources=["modules/js_subghz/*.c"],
)

App(
    appid="js_blebeacon",
    apptype=FlipperAppType.PLUGIN,
    entry_point="js_blebeacon_ep",
    requires=["js_app"],
    sources=["modules/js_blebeacon.c"],
)

App(
    appid="js_usbdisk",
    apptype=FlipperAppType.PLUGIN,
    entry_point="js_usbdisk_ep",
    requires=["js_app"],
    sources=["modules/js_usbdisk/*.c"],
)

App(
    appid="js_i2c",
    apptype=FlipperAppType.PLUGIN,
    entry_point="js_i2c_ep",
    requires=["js_app"],
    sources=["modules/js_i2c.c"],
)

App(
    appid="js_spi",
    apptype=FlipperAppType.PLUGIN,
    entry_point="js_spi_ep",
    requires=["js_app"],
    sources=["modules/js_spi.c"],
)
